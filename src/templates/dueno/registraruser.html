{% extends 'superuser/dashboard.html' %}

{% block content %}
<main class="main-content">
  <div class="container">
    <h5 class="section-title mb-3 mt-0">Registro de empleados</h5>
    <!-- Barra de progreso -->
    <div class="progress mb-4">
      <div id="progress-bar" class="progress-bar barra" role="progressbar" style="width: 50%"
        aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">Paso 1 de 2</div>
    </div>
    <!-- Mensajes flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <!-- Pestañas de navegación -->
    <ul class="nav nav-tabs" id="formTabs" role="tablist">
      <li class="nav-item" role="presentation">
          <button class="nav-link active rounded-pill px-4" id="tab-personal" data-bs-toggle="pill"
              data-bs-target="#datos-personales" type="button" role="tab">Datos personales</button>
      </li>
      <li class="nav-item" role="presentation">
          <button class="nav-link rounded-pill px-4 mb-1" id="tab-compania" data-bs-toggle="pill"
              data-bs-target="#datos-compania" type="button" role="tab">Datos de la compañía</button>
      </li>
    </ul>

    <!-- Contenido de las pestañas -->
    <div class="tab-content bg-white p-4 rounded-4 shadow-sm" id="pills-tabContent">

      <!-- Datos personales -->
      <div class="tab-pane fade show active" id="datos-personales" role="tabpanel">
        <form id="regForm" action="/registrardp" method="POST" autocomplete="off">
          <div class="row g-3">
            <div class="col-md-4">
              <label for="rfc">RFC:</label>
              <input class="form-control custom-input" type="text" id="rfc" name="rfc" required>
            </div>
            <div class="col-md-4">
              <label for="nombre">Nombre:</label>
              <input class="form-control custom-input" type="text" id="nombre" name="nombre" required>
            </div>
            <div class="col-md-4">
              <label for="app">Apellido paterno:</label>
              <input class="form-control custom-input" type="text" id="app" name="app" required>
            </div>
            <div class="col-md-4">
              <label for="sexo">Sexo:</label>
              <select class="form-select custom-input" id="sexo" name="sexo" required>
                <option value="">Seleccionar</option>
                <option value="M">Masculino</option>
                <option value="F">Femenino</option>
              </select>
            </div>
            <div class="col-md-4">
              <label for="tel">Teléfono:</label>
              <input class="form-control custom-input" type="tel" id="tel" name="tel" required>
            </div>
            <div class="col-md-4">
              <label for="mail">Correo electrónico:</label>
              <input class="form-control custom-input" type="email" id="mail" name="mail" required>
            </div>
            <div class="col-md-4">
              <label for="rol">Rol:</label>
              <select class="form-select custom-input" id="rol" name="rol" required>
                <option value="">Seleccionar</option>
              </select>
            </div>
            <div class="col-md-4">
              <label for="comp_paises" class="form-label">País:</label>
              <select class="form-select custom-input" id="comp_paises" name="paises" required onchange="selectPais(event)">
                <option value="" disabled selected>Selecciona el país</option>
                {% for idpais, nombre in paises %}
                  <option value="{{ idpais }}">{{ nombre }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-4">
              <label for="comp_estados" class="form-label">Estado:</label>
              <select class="form-select custom-input" id="comp_estados" name="estados" required
                  onchange="selectEstado(event)">
                  <option value="" disabled selected>Selecciona el estado</option>
              </select>
          </div>
          <div class="col-md-4">
            <label for="comp_municipios" class="form-label">Municipio:</label>
            <select class="form-select custom-input" id="comp_municipios" name="municipios" required
                onchange="selectMunicipio(event)">
                <option value="" disabled selected>Selecciona el municipio</option>
            </select>
        </div>
        <div class="col-md-4">
          <label for="comp_idcolonia" class="form-label">Colonia:</label>
          <select class="form-select custom-input" id="comp_idcolonia" name="idcolonia" required
          onchange="selectColonia(event)">
              <option value="" disabled selected>Selecciona la colonia</option>
          </select>
      </div>
            <div class="col-md-4">
              <label for="calle">Calle:</label>
              <input class="form-control custom-input" type="text" id="calle" name="calle" required>
            </div>
            <div class="col-md-4">
              <label for="numero">Número de calle:</label>
              <input class="form-control custom-input" type="text" id="numero" name="numero" required>
            </div>
          </div>
          <div class="text-center mt-4">
            <button type="submit" class="btn btn-warning fw-bold px-5 py-2 rounded-pill">Guardar</button>
          </div>
        </form>
      </div>

      <!-- Datos del empleado -->
      <div class="tab-pane fade" id="datos-empleado" role="tabpanel">
        <form action="/registrarde" method="POST">
          <div class="row g-3">
            <div class="col-md-4">
              <label for="rfc">RFC:</label>
              <input class="form-control custom-input" type="text" id="rfc" name="rfc" required>
            </div>
            <div class="col-md-4">
              <label for="idpuesto">Puesto:</label>
              <select class="form-select custom-input" id="idpuesto" name="idpuesto" required>
                <option value="">Seleccionar</option>
              </select>
            </div>
            <div class="col-md-4">
              <label for="idsucursal">Sucursal:</label>
              <select class="form-select custom-input" id="idsucursal" name="idsucursal" required>
                <option value="">Seleccionar</option>
              </select>
            </div>
            <div class="col-md-4">
              <label for="fechcon">Fecha de contratación:</label>
              <input class="form-control custom-input" type="date" id="fechcon" name="fechcon" required>
            </div>
            <div class="col-md-4">
              <label for="sueldo">Sueldo:</label>
              <input class="form-control custom-input" type="text" id="sueldo" name="sueldo" required>
            </div>
            <div class="col-md-4">
              <label for="turno">Turno:</label>
              <input class="form-control custom-input" type="text" id="turno" name="turno" required>
            </div>
            <div class="col-12">
              <h6 class="fw-bold mt-3">Credenciales</h6>
            </div>
            <div class="col-md-6">
              <label for="usuario">Usuario:</label>
              <input class="form-control custom-input" type="text" id="usuario" name="usuario" required>
            </div>
            <div class="col-md-6">
              <label for="password">Contraseña:</label>
              <input class="form-control custom-input" type="password" id="password" name="password" required>
            </div>
          </div>
          <div class="text-center mt-4">
            <button type="submit" class="btn btn-warning fw-bold px-5 py-2 rounded-pill">Registrar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>
<script src="{{ url_for('static', filename='js/location.js') }}"></script>
<script src="{{ url_for('static', filename='js/formHandler.js') }}"></script>

{% endblock %}